---
# Feel free to add content and custom Front Matter to this file.
# To modify the layout, see https://jekyllrb.com/docs/themes/#overriding-theme-defaults

layout: default
---
<div>
    <button onclick="captureImage()">拍照</button>
    <div id="message">

    </div>
</div>
<script>
    document.addEventListener("plusready", onPlusReady, false);
    function showMessage(msg) {
        var messageBlock = document.getElementById("message");
        var par = document.createElement("p")
        par.innerText = msg
        messageBlock.appendChild(par)
        return
    }
    function onPlusReady() {
        showMessage("plusready");
    }
    function captureImage() {
        var cmr = plus.camera.getCamera();
        var res = cmr.supportedImageResolutions[0];
        var fmt = cmr.supportedImageFormats[0];
        showMessage("Resolution: " + res + ", Format: " + fmt);
        cmr.captureImage(function (path) {
            showMessage("Capture image success: " + path);
            plus.io.resolveLocalFileSystemURL(path, function(entry) {
                showMessage(entry.toLocalURL())
                entry.file(function(file) {
                    var fileReader = new plus.io.FileReader();
                    showMessage("getFile:" + JSON.stringify(file))
                    fileReader.onloadend = function(evt) {
                        showMessage(evt.target.result)
                    }
                    fileReader.readAsText(file, 'utf-8');
                })
            }, function(error) {
                showMessage(JSON.stringify(error))
            } );
        },
            function (error) {
                showMessage("Capture image failed: " + error.message);
            },
            { resolution: res, format: fmt }
        );
    }
</script>